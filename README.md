# –û—Ü–µ–Ω–∫–∞ —Ç—Ä–µ–∫–æ–≤ –Ω–∞ —Å—Ç—Ä–∏–º–µ ¬∑ v3 (–∫–æ—Å–º–µ—Ç–∏–∫–∞ + –ª–∞–π–≤-–æ–≥–æ–Ω—å)

–í —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏:

- –ª–∞–π–≤‚Äë–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—â–µ–≥–æ –±–∞–ª–ª–∞ –ø–æ –∫–∞–∂–¥–æ–º—É –æ—Ü–µ–Ω—â–∏–∫—É –∏ –∏—Ç–æ–≥–æ–≤–æ–≥–æ –±–∞–ª–ª–∞ —Ç—Ä–µ–∫–∞;
- –ø–ª–∞–≤–Ω—ã–π ¬´–ø–æ–¥–æ–≥—Ä–µ–≤¬ª –≤–∏–∑—É–∞–ª–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ—Ü–µ–Ω–∫–∏ (—Ü–∏—Ñ—Ä—ã + —Å–ª–∞–π–¥–µ—Ä—ã);
- –ø—Ä–∏ –∑–Ω–∞—á–µ–Ω–∏–∏ **10** –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π ¬´–æ–≥–æ–Ω—ë–∫¬ª üî• –∑–∞ —Ü–∏—Ñ—Ä–æ–π (–∏ –ª—ë–≥–∫–∏–π –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –ø—É–ª—å—Å);
- –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–ø–∞–ø–∞ ¬´–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ü–µ–Ω–∫–∏¬ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
  - —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –≤—Å–µ —Å–ª–∞–π–¥–µ—Ä—ã –≤ `0`,
  - –æ—á–∏—â–∞–µ—Ç—Å—è –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç—Ä–µ–∫–∞,
  - –æ–±–Ω—É–ª—è–µ—Ç—Å—è –æ–±—â–∏–π –±–∞–ª–ª;
- –æ—Å—Ç–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, sqlite, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è, –ø–æ–ø–∞–ø) —Å–æ—Ö—Ä–∞–Ω—ë–Ω.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –ª–æ–∫–∞–ª—å–Ω–æ

```bash
cd track_rating_site_v3
python -m venv venv
source venv/bin/activate        # –∏–ª–∏ venv\Scripts\activate –≤ Windows
pip install -r requirements.txt
python app.py
```

–û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```text
http://localhost:5000
```

–õ–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

```text
admin / admin123
```

(–º–æ–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –≤ systemd —Å–µ—Ä–≤–∏—Å–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ).

## –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –õ–∞–π–≤‚Äë–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—â–µ–≥–æ –±–∞–ª–ª–∞

- –ü—Ä–∏ –ª—é–±–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏ —Å–ª–∞–π–¥–µ—Ä–∞:
  - –ª–æ–∫–∞–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `state.raters[id].scores[criterion]`;
  - –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `computeAndRenderTotalsFromState()`:
    - —Å—á–∏—Ç–∞–µ—Ç—Å—è —Å—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª –ø–æ –∫–∞–∂–¥–æ–º—É –æ—Ü–µ–Ω—â–∏–∫—É;
    - —Å—á–∏—Ç–∞–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Å—Ä–µ–¥–Ω–∏–π –ø–æ —Ç—Ä–µ–∫—É;
    - –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ü–∏—Ñ—Ä—ã –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö –∏ –≤–Ω–∏–∑—É.
- –°–ª–∞–π–¥–µ—Ä—ã, –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ –Ω–∞ –¥—Ä—É–≥–æ–º –∫–ª–∏–µ–Ω—Ç–µ, –ø—Ä–∏—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏–µ `slider_updated` –∏ —Ç–æ–∂–µ –æ–±–Ω–æ–≤–ª—è—é—Ç:
  - –∑–Ω–∞—á–µ–Ω–∏—è —Å–ª–∞–π–¥–µ—Ä–∞,
  - –∑–Ω–∞—á–µ–Ω–∏–µ —Ü–∏—Ñ—Ä—ã —Ä—è–¥–æ–º,
  - –æ–±—â–∏–π –±–∞–ª–ª –ø–æ –∫–∞—Ä—Ç–æ—á–∫–∞–º/—Ç—Ä–µ–∫—É.

–ö–Ω–æ–ø–∫–∞ **¬´–û—Ü–µ–Ω–∏—Ç—å —Ç—Ä–µ–∫¬ª** –ø–æ‚Äë–ø—Ä–µ–∂–Ω–µ–º—É –Ω—É–∂–Ω–∞ –¥–ª—è:

- —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ SQLite;
- –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–ø–∞–ø–∞ —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π.

### 2. ¬´–ü–æ–¥–æ–≥—Ä–µ–≤¬ª –≤–∏–∑—É–∞–ª–∞ –∏ –æ–≥–æ–Ω—å üî•

–î–ª—è –≤—Å–µ—Ö ¬´—á–∏–ø–æ–≤¬ª —Å —Ü–∏—Ñ—Ä–∞–º–∏ (`.slider-value`, `.panel-total-value`, `.global-total-value`, `.modal-overall-value`) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–±—â–∏–π –∫–ª–∞—Å—Å `.score-chip` –∏ –ª–æ–≥–∏–∫–∞:

- —Ü–≤–µ—Ç —Ñ–æ–Ω–∞ –∏ –ª—ë–≥–∫–∏–π glow –∑–∞–≤–∏—Å—è—Ç –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ç `0` –¥–æ `10`;
- —Ü–≤–µ—Ç –±–µ—Ä—ë—Ç—Å—è –∏–∑ –ø–ª–∞–≤–Ω–æ–≥–æ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ **–æ—Ç —Ö–æ–ª–æ–¥–Ω–æ–≥–æ –≥–æ–ª—É–±–æ–≥–æ** –∫ **—è—Ä–∫–æ–º—É –æ–≥–Ω–µ–Ω–Ω–æ‚Äë–∫—Ä–∞—Å–Ω–æ–º—É**;
- –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π `< 10` ‚Äî –ø—Ä–æ—Å—Ç–æ –ø–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –∏ —Å–≤–µ—á–µ–Ω–∏—è;
- –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏—è **`10`**:
  - –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–ª–∞—Å—Å `.score-chip--flame` ‚Üí –∑–∞ —Ü–∏—Ñ—Ä–æ–π –ø–æ—è–≤–ª—è–µ—Ç—Å—è üî• —Å –ª—ë–≥–∫–æ–π –∞–Ω–∏–º–∞—Ü–∏–µ–π ¬´–¥—Ä–æ–∂–∞–Ω–∏—è¬ª;
  - –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–ª–∞—Å—Å `.score-chip--hot` ‚Üí –ª—ë–≥–∫–∏–π –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –ø—É–ª—å—Å (–Ω–µ—è—Ä–∫–∏–π, —á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞–ª).

–°–ª–∞–π–¥–µ—Ä—ã (`.score-slider`) —Ç–æ–∂–µ –ø–æ–¥–∫—Ä–∞—à–∏–≤–∞—é—Ç—Å—è:

- —Ñ–æ–Ω —Ç—Ä–µ–∫–∞ –∑–∞–¥–∞—ë—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤ JS —á–µ—Ä–µ–∑ `linear-gradient(90deg, color, rgba(15,23,42,0.95))`;
- glow –≤–æ–∫—Ä—É–≥ —Å–ª–∞–π–¥–µ—Ä–∞ —É—Å–∏–ª–∏–≤–∞–µ—Ç—Å—è —Å —Ä–æ—Å—Ç–æ–º –∑–Ω–∞—á–µ–Ω–∏—è.

### 3. –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Å–ª–µ –ø–æ–ø–∞–ø–∞

- –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —Å–µ—Ä–≤–µ—Ä –ø–æ—Å—á–∏—Ç–∞–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –æ—Ç–ø—Ä–∞–≤–∏–ª `evaluation_result`, —É –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ–ø–∞–ø.
- –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–ø–∞–ø–∞ (–∫—Ä–µ—Å—Ç–∏–∫, –∫–ª–∏–∫ –ø–æ —Ñ–æ–Ω—É, `Esc`):
  - —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –≤—ã–∑—ã–≤–∞–µ—Ç `socket.emit("reset_state")`;
  - —Å–µ—Ä–≤–µ—Ä:
    - –æ—á–∏—â–∞–µ—Ç `track_name`,
    - –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ü–µ–Ω—â–∏–∫–∞ –æ–±–Ω—É–ª—è–µ—Ç –≤—Å–µ `scores` –≤ `0`,
    - —Ä–∞—Å—Å—ã–ª–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ `state_reset` —Å–æ —Å–≤–µ–∂–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º.
- –ö–ª–∏–µ–Ω—Ç—ã –ø–æ `state_reset`:
  - –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç `state` —Å –Ω—É–ª—è–º–∏;
  - —á–∏—Å—Ç—è—Ç –∏–Ω–ø—É—Ç —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Ç—Ä–µ–∫–∞;
  - –æ–±–Ω–æ–≤–ª—è—é—Ç –ø–æ–¥–ø–∏—Å–∏ ¬´–°–µ–π—á–∞—Å –∏–≥—Ä–∞–µ—Ç: ‚Äî¬ª –∏ –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö;
  - —Ä–µ–Ω–¥–µ—Ä—è—Ç –ø–∞–Ω–µ–ª–∏ –∑–∞–Ω–æ–≤–æ;
  - –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç –æ–±—â–∏–µ –±–∞–ª–ª—ã (–≤–µ–∑–¥–µ `0.0`).

–ò–º–µ–Ω–∞ –æ—Ü–µ–Ω—â–∏–∫–æ–≤ –ø—Ä–∏ —ç—Ç–æ–º **–Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è**.

## –°–µ—Ä–≤–µ—Ä / –¥–µ–ø–ª–æ–π

–î–µ–ø–ª–æ–π –Ω–∞ VPS (Ubuntu + nginx + gunicorn+eventlet) –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ, –∫–∞–∫ –∏ –ø—Ä–µ–¥—ã–¥—É—â–∞—è –≤–µ—Ä—Å–∏—è:

- —Ä–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä: `/var/www/track_rating`;
- –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ `venv`;
- systemd‚Äë—Å–µ—Ä–≤–∏—Å —Å –∑–∞–ø—É—Å–∫–æ–º:

```ini
ExecStart=/var/www/track_rating/venv/bin/gunicorn \
          -k eventlet \
          -w 1 \
          --bind unix:/var/www/track_rating/app.sock \
          app:app
```

- nginx –∫–∞–∫ reverse‚Äëproxy —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π WebSocket:

```nginx
location / {
    include proxy_params;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_pass http://unix:/var/www/track_rating/app.sock;
}
```

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

- `ADMIN_USERNAME`
- `ADMIN_PASSWORD`
- `SECRET_KEY`

–ú–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å —á–µ—Ä–µ–∑ systemd‚Äë—Å–µ—Ä–≤–∏—Å (Environment=‚Ä¶).

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

–°–ø–∏—Å–æ–∫ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –ª–µ–∂–∏—Ç –≤ `app.py` –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–µ `CRITERIA`:

```python
CRITERIA = [
    ("rhyme", "–†–∏—Ñ–º—ã –∏–ª–∏ –ø–∞–Ω—á–∏"),
    ("structure", "–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–ª–∏ —Ä–∏—Ç–º–∏–∫–∞"),
    ("style", "–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å—Ç–∏–ª—è"),
    ("quality", "–ö–∞—á–µ—Å—Ç–≤–æ"),
    ("vibe", "–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞ –∏–ª–∏ –≤–∞–π–±"),
]
```

–ß—Ç–æ–±—ã –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å –≤—Ç–æ—Ä–æ–π —ç–ª–µ–º–µ–Ω—Ç –∫–æ—Ä—Ç–µ–∂–µ–π (–ø–æ–¥–ø–∏—Å–∏). –ö–ª—é—á–∏ (`"rhyme"`, `"vibe"` –∏ —Ç.–¥.) –ª—É—á—à–µ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–µ–∂–Ω–∏–º–∏, —á—Ç–æ–±—ã –Ω–µ –ª–æ–º–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –±–∞–∑–µ.